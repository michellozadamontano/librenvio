<nav class="navbar navbar-expand navbar-dark bg-dark">
    <div class="navbar-nav">
        <a class="nav-item nav-link" routerLink="/">Home</a>
    </div>
</nav>
<div class="container mt-4">
  <div class="row justify-content-md-center">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Registrarse</h4>
          <p class="card-text">Registro de usuarios</p>
          <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="row">
                <div class="col-6">
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput formControlName="username"
                                   type="text"
                                   required
                                   placeholder="Nombre"
                                   [ngClass]="{ 'is-invalid': submitted && f.username.errors }">
                        </mat-form-field>
                        <mat-error *ngIf="submitted && f.username.errors">Nombre requerido</mat-error>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                          <input matInput
                          required
                          placeholder="Apellidos"
                          formControlName="lastname"
                          [ngClass]="{ 'is-invalid': submitted && f.lastname.errors }"
                          >
                        </mat-form-field>
                        <mat-error *ngIf="submitted && f.lastname.errors">Apellidos requerido</mat-error>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput
                            required
                            placeholder="Password" [type]="hide ? 'password' : 'text'"
                            formControlName="password">
                            <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </mat-form-field>
                          <mat-error *ngIf="submitted && f.password.errors?.required">Password requerido</mat-error>
                          <mat-error *ngIf="submitted && f.password.errors?.minlength">El password debe tener al menos 8 caracteres</mat-error>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput
                            required
                            placeholder="Confirme Password" [type]="hide ? 'password' : 'text'"
                            formControlName="password_confirm">
                            <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                          </mat-form-field>
                          <mat-error *ngIf="submitted && f.password_confirm.errors?.required">Password requerido</mat-error>
                          <mat-error *ngIf="submitted && f.password_confirm.errors?.mustMatch">Los password deben coincidir</mat-error>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput
                            required
                            placeholder="Email"
                            formControlName="email"
                            >
                          </mat-form-field>
                          <mat-error *ngIf="f.email.invalid">{{getErrorMessage()}}</mat-error>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput
                            required
                            placeholder="Telefono"
                            formControlName="phone"
                            >
                        </mat-form-field>
                        <mat-error *ngIf="submitted && f.phone.errors">Telefono requerido</mat-error>
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group">
                      <mat-form-field class="input-width">
                        <mat-select placeholder="Sexo" formControlName="sexo">
                            <mat-option value="M">M</mat-option>
                            <mat-option value="F">F</mat-option>
                        </mat-select>
                    </mat-form-field>
                      <mat-error *ngIf="submitted && f.sexo.errors">Telefono requerido</mat-error>
                    </div>
                    <p>Direccion Particular</p>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput
                            required
                            placeholder="Estado"
                            formControlName="state"
                            [ngClass]="{ 'is-invalid': submitted && f.state.errors }"
                            >
                        </mat-form-field>
                        <mat-error *ngIf="submitted && f.state.errors">Estado requerido</mat-error>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput
                            required
                            placeholder="Ciuda"
                            formControlName="city"
                            [ngClass]="{ 'is-invalid': submitted && f.city.errors }"
                            >
                        </mat-form-field>
                        <mat-error *ngIf="submitted && f.city.errors">Ciuda requerido</mat-error>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput
                            required
                            placeholder="Numero Casa"
                            formControlName="number"
                            [ngClass]="{ 'is-invalid': submitted && f.number.errors }"
                            >
                        </mat-form-field>
                        <mat-error *ngIf="submitted && f.number.errors">Numero Casa requerido</mat-error>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="input-width">
                            <input matInput
                            required
                            placeholder="Codigo Postal"
                            formControlName="postal_code"
                            [ngClass]="{ 'is-invalid': submitted && f.postal_code.errors }"
                            >
                        </mat-form-field>
                        <mat-error *ngIf="submitted && f.postal_code.errors">Codigo Postal requerido</mat-error>
                    </div>
                </div>
            </div>
              <div class="form-group">
                  <button [disabled]="loading" class="btn btn-primary">Aceptar</button>
                  <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />

              </div>
          </form>
        </div>
      </div>


    </div>
  </div>
</div>

